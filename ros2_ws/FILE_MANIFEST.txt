================================================================================
Franka Emika Panda Robot - ROS 2 Humble å·¥ä½œåŒº - æ–‡ä»¶æ¸…å•
================================================================================

é¡¹ç›®æ ¹ç›®å½•ï¼š
/media/dubhe/store/sim/panda/PandaRobot/ros2_ws/

================================================================================
ä¸»è¦ç›®å½•å’Œæ–‡ä»¶
================================================================================

src/panda_description/                    # ROS 2 åŒ…æ ¹ç›®å½•
â”œâ”€â”€ CMakeLists.txt                        # CMake æ„å»ºé…ç½®ï¼ˆament_cmakeï¼‰
â”œâ”€â”€ package.xml                           # åŒ…å…ƒæ•°æ®å’Œä¾èµ–å£°æ˜
â”œâ”€â”€ launch/
â”‚   â””â”€â”€ view_panda.launch.py             # ğŸš€ ROS 2 Launch æ–‡ä»¶
â”œâ”€â”€ urdf/
â”‚   â””â”€â”€ panda.urdf                        # ğŸ¤– æœºå™¨äºº URDF æ¨¡å‹å®šä¹‰
â”œâ”€â”€ meshes/
â”‚   â”œâ”€â”€ collision/                        # ç¢°æ’æ£€æµ‹ç½‘æ ¼ï¼ˆOBJ æ ¼å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ link0.obj, link1.obj, ...
â”‚   â”‚   â””â”€â”€ finger.obj, hand.obj
â”‚   â””â”€â”€ visual/                           # âœ¨ å¯è§†åŒ–ç½‘æ ¼ï¼ˆDAE æ ¼å¼ï¼‰
â”‚       â”œâ”€â”€ link0.dae through link7.dae   # 7 ä¸ªå…³èŠ‚é“¾æ¥
â”‚       â”œâ”€â”€ hand.dae                      # æœºå™¨äººæ‰‹éƒ¨
â”‚       â””â”€â”€ finger.dae                    # å¤¹çˆªæ‰‹æŒ‡
â””â”€â”€ include/panda_description/            # C++ å¤´æ–‡ä»¶ç›®å½•ï¼ˆä¿ç•™æ‰©å±•ç”¨ï¼‰

build/                                    # ğŸ”¨ CMake æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ panda_description/
â”‚   â”œâ”€â”€ CMakeFiles/
â”‚   â””â”€â”€ *.cmake é…ç½®æ–‡ä»¶
â””â”€â”€ ...

install/                                  # ğŸ“¦ å®‰è£…æ–‡ä»¶ç›®å½•
â”œâ”€â”€ panda_description/
â”‚   â””â”€â”€ share/panda_description/
â”‚       â”œâ”€â”€ launch/                       # å·²å®‰è£…çš„ launch æ–‡ä»¶
â”‚       â”œâ”€â”€ urdf/                         # å·²å®‰è£…çš„ URDF
â”‚       â””â”€â”€ meshes/                       # å·²å®‰è£…çš„ç½‘æ ¼
â””â”€â”€ local_setup.bash                      # ç¯å¢ƒè®¾ç½®è„šæœ¬

log/                                      # ğŸ“‹ æ„å»ºæ—¥å¿—ç›®å½•
â””â”€â”€ build_YYYY-MM-DD_HH-MM-SS/

================================================================================
å¯åŠ¨è„šæœ¬å’Œæ–‡æ¡£
================================================================================

run_panda.sh                               # â­ ä¸»å¯åŠ¨è„šæœ¬ï¼ˆä¸€é”®å¯åŠ¨ï¼‰
QUICK_START.md                            # â­ å¿«é€Ÿå¼€å§‹æŒ‡å—ï¼ˆå¿…è¯»ï¼‰
OVERVIEW.md                               # ğŸ“– é¡¹ç›®æ¦‚è§ˆ
README.md                                 # ğŸ“š å®Œæ•´æ–‡æ¡£
FILE_MANIFEST.txt                         # ğŸ“‹ æœ¬æ–‡ä»¶

================================================================================
å¿«é€Ÿå¯åŠ¨
================================================================================

æ–¹æ³• 1ï¼ˆæ¨èï¼‰ï¼š
$ cd /media/dubhe/store/sim/panda/PandaRobot/ros2_ws
$ ./run_panda.sh

æ–¹æ³• 2ï¼ˆæ‰‹åŠ¨ï¼‰ï¼š
$ cd /media/dubhe/store/sim/panda/PandaRobot/ros2_ws
$ source /opt/ros/humble/setup.bash
$ source install/setup.bash
$ ros2 launch panda_description view_panda.launch.py

================================================================================
æ–‡ä»¶è¯¦ç»†è¯´æ˜
================================================================================

CMakeLists.txt
  - å®šä¹‰ ROS 2 ament_cmake é¡¹ç›®
  - é…ç½®å®‰è£…è§„åˆ™ï¼ˆlaunchã€urdfã€meshesï¼‰
  - è®¾ç½®ç¼–è¯‘é€‰é¡¹

package.xml
  - åŒ…åç§°ã€ç‰ˆæœ¬ã€æè¿°
  - ä¾èµ–é¡¹ï¼šurdf, robot_state_publisher, joint_state_publisher, rviz2
  - æ„å»ºå·¥å…·ï¼šament_cmake

view_panda.launch.py
  - Python æ ¼å¼çš„ ROS 2 Launch æ–‡ä»¶
  - å¯åŠ¨ robot_state_publisherï¼šå‘å¸ƒ URDF å’Œ TF å˜æ¢
  - å¯åŠ¨ joint_state_publisherï¼šå‘å¸ƒå…³èŠ‚çŠ¶æ€
  - å¯åŠ¨ rviz2ï¼š3D å¯è§†åŒ–å·¥å…·

panda.urdf
  - URDF æ ¼å¼çš„æœºå™¨äººæ¨¡å‹
  - å®šä¹‰ 12 ä¸ª link å’Œå¯¹åº”çš„ joint
  - æŒ‡å‘ç½‘æ ¼æ–‡ä»¶ï¼špackage://panda_description/meshes/visual/*.dae
  - ä¸»è¦ linkï¼š
    * panda_link0-7: 7 ä¸ªå…³èŠ‚é“¾æ¥
    * panda_hand: å¤¹çˆªåŸºåº§
    * panda_leftfinger, panda_rightfinger: å¤¹çˆªæ‰‹æŒ‡

ç½‘æ ¼æ–‡ä»¶ï¼ˆMeshesï¼‰
  visual/ ç›®å½•ï¼ˆDAE æ ¼å¼ï¼‰ï¼š
    - link0-7.dae: 7 ä¸ªå…³èŠ‚çš„ 3D æ¨¡å‹ï¼ˆé«˜è´¨é‡ï¼‰
    - hand.dae: å¤¹çˆªæ‰‹éƒ¨ï¼ˆé«˜è´¨é‡ï¼‰
    - finger.dae: å¤¹çˆªæ‰‹æŒ‡ï¼ˆé«˜è´¨é‡ï¼‰
    ç”¨é€”ï¼šRViz2 å¯è§†åŒ–æ˜¾ç¤º

  collision/ ç›®å½•ï¼ˆOBJ æ ¼å¼ï¼‰ï¼š
    - ä¸ visual å¯¹åº”çš„ä½å¤šè¾¹å½¢æ¨¡å‹
    ç”¨é€”ï¼šç¢°æ’æ£€æµ‹å’Œç‰©ç†ä»¿çœŸï¼ˆå¯é€‰ï¼‰

run_panda.sh
  - Bash å¯åŠ¨è„šæœ¬
  - è‡ªåŠ¨ source ROS 2 å’Œæœ¬åœ°ç¯å¢ƒ
  - å¯åŠ¨æ‰€æœ‰å¿…è¦çš„ ROS 2 èŠ‚ç‚¹
  - æ˜¾ç¤ºå¯åŠ¨ä¿¡æ¯

================================================================================
å…³é”®æŠ€æœ¯ç»†èŠ‚
================================================================================

URDF ç½‘æ ¼è·¯å¾„ä¿®å¤ï¼š
  åŸå§‹ï¼špackage://Panda/meshes/collision/*.obj
  ä¿®å¤åï¼špackage://panda_description/meshes/visual/*.dae
  
  åŸå› ï¼š
  1. åŒ…åä¸åŒ¹é…ï¼ˆPanda vs panda_descriptionï¼‰
  2. æ ¼å¼è½¬æ¢ï¼ˆOBJ â†’ DAE ç”¨äºå¯è§†åŒ–ï¼‰

ROS 2 èŠ‚ç‚¹å…³ç³»ï¼š
  robot_state_publisher
    â†“ è¯»å– URDFï¼Œå‘å¸ƒ /robot_description å’Œ TF
  joint_state_publisher
    â†“ å‘å¸ƒ /joint_states è¯é¢˜
  rviz2
    â†“ è®¢é˜…ä¸Šè¿°è¯é¢˜ï¼Œæ˜¾ç¤º 3D æ¨¡å‹

é‡è¦è¯é¢˜ï¼š
  /robot_description   : URDF æ¨¡å‹å†…å®¹
  /joint_states        : å…³èŠ‚ä½ç½®ã€é€Ÿåº¦ã€åŠ›çŸ©
  /tf                  : åæ ‡å˜æ¢æ ‘
  /tf_static           : é™æ€åæ ‡å˜æ¢

================================================================================
å¸¸ç”¨ ROS 2 å‘½ä»¤
================================================================================

å¯åŠ¨å’Œåœæ­¢ï¼š
$ ./run_panda.sh                          # å¯åŠ¨æœºå™¨äºº
$ Ctrl+C                                  # åœæ­¢

ç›‘æ§å’Œè°ƒè¯•ï¼š
$ ros2 topic list                         # åˆ—å‡ºæ‰€æœ‰è¯é¢˜
$ ros2 topic echo /joint_states           # æŸ¥çœ‹å…³èŠ‚çŠ¶æ€
$ ros2 node list                          # åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹
$ ros2 run tf2_tools view_frames          # æŸ¥çœ‹ TF æ ‘

æ„å»ºå’Œç¼–è¯‘ï¼š
$ colcon build                            # æ„å»ºæ•´ä¸ªå·¥ä½œåŒº
$ colcon build --packages-select panda_description
$ colcon clean packages --select panda_description

================================================================================
æ‰©å±•æŒ‡å—
================================================================================

1. æ·»åŠ æ–°çš„ ROS 2 èŠ‚ç‚¹ï¼š
   $ cd src
   $ ros2 pkg create --build-type ament_cmake my_controller
   $ cd ..
   $ colcon build

2. ä¿®æ”¹ URDF æ¨¡å‹ï¼š
   ç¼–è¾‘ src/panda_description/urdf/panda.urdfï¼Œç„¶åé‡æ–°æ„å»º

3. æ›¿æ¢ç½‘æ ¼æ–‡ä»¶ï¼š
   å°†æ–°çš„ DAE æ–‡ä»¶æ”¾åœ¨ src/panda_description/meshes/visual/
   æ›´æ–° URDF ä¸­çš„å¼•ç”¨ï¼Œé‡æ–°æ„å»º

4. è‡ªå®šä¹‰ Launch æ–‡ä»¶ï¼š
   åˆ›å»ºæ–°çš„ .launch.py æ–‡ä»¶ï¼Œæ·»åŠ æ›´å¤šèŠ‚ç‚¹å’Œå‚æ•°

================================================================================
ç³»ç»Ÿè¦æ±‚
================================================================================

- Ubuntu 22.04 LTS
- ROS 2 Humble
- Python 3.10+
- colcon æ„å»ºå·¥å…·
- æ˜¾ç¤ºæœåŠ¡å™¨ï¼ˆX11 æˆ– Waylandï¼‰ç”¨äº RViz2

================================================================================
å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
================================================================================

Q: RViz2 ä¸æ˜¾ç¤ºæœºå™¨äººï¼Ÿ
A: æ£€æŸ¥ç½‘æ ¼æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œç¡®ä¿ URDF ä¸­çš„è·¯å¾„æ­£ç¡®

Q: å¯åŠ¨æ—¶å‡ºé”™"æ‰¾ä¸åˆ°åŒ…"ï¼Ÿ
A: ç¡®ä¿å·²æ‰§è¡Œ source install/setup.bash

Q: å¦‚ä½•æŸ¥çœ‹æœºå™¨äººçš„åæ ‡ç³»ï¼Ÿ
A: è¿è¡Œ ros2 run tf2_tools view_frames

Q: å¯ä»¥æ§åˆ¶æœºå™¨äººå—ï¼Ÿ
A: å¯ä»¥ï¼å‘å¸ƒåˆ° /joint_states è¯é¢˜æ¥è®¾ç½®å…³èŠ‚è§’åº¦

================================================================================
æœ€åæ›´æ–°ï¼š2025-12-04
================================================================================
