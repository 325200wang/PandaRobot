# ğŸ¤– Franka Emika Panda æœºå™¨äºº ROS 2 æ¼”ç¤ºç³»ç»Ÿ

> **ä¸“ä¸šçº§æœºå™¨äººå¯è§†åŒ–ä¸æ§åˆ¶æ¼”ç¤º** | ROS 2 Humble | å®Œå…¨å¼€æº

## ğŸ“– ç›®å½•
- [1. ç³»ç»Ÿæ¦‚è¿°](#1-ç³»ç»Ÿæ¦‚è¿°)
- [2. å¿«é€Ÿæ¼”ç¤ºï¼ˆ3æ­¥å¯åŠ¨ï¼‰](#2-å¿«é€Ÿæ¼”ç¤º3æ­¥å¯åŠ¨)
- [3. æœºå™¨äººæ§åˆ¶æ–¹æ³•](#3-æœºå™¨äººæ§åˆ¶æ–¹æ³•)
- [4. ç³»ç»Ÿæ¶æ„](#4-ç³»ç»Ÿæ¶æ„)
- [5. æŠ€æœ¯è§„æ ¼](#5-æŠ€æœ¯è§„æ ¼)
- [6. å¸¸è§é—®é¢˜](#6-å¸¸è§é—®é¢˜)

---

## 1. ç³»ç»Ÿæ¦‚è¿°

### é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æä¾›äº†ä¸€ä¸ª**å®Œæ•´çš„ Franka Emika Panda 7-DOF åä½œæœºå™¨äººåœ¨ ROS 2 Humble ä¸­çš„å¯è§†åŒ–ä¸æ§åˆ¶ç³»ç»Ÿ**ï¼Œå¼€ç®±å³ç”¨ï¼Œæ— éœ€å¤æ‚é…ç½®ã€‚

### æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ¯ **å³æ’å³ç”¨** | ä¸€é”®å¯åŠ¨ï¼Œè‡ªåŠ¨åŠ è½½æœºå™¨äººæ¨¡å‹ |
| ğŸ® **å¤šç§æ§åˆ¶** | GUIæ»‘å—ã€Pythonè„šæœ¬ã€Jupyteräº¤äº’å¼ |
| ğŸ“Š **å®æ—¶å¯è§†åŒ–** | RViz2 å®æ—¶æ˜¾ç¤ºæœºå™¨äººçŠ¶æ€å’Œåæ ‡ç³» |
| ğŸ”§ **å®Œæ•´æ¨¡å‹** | 12ä¸ªLinkï¼Œ8ä¸ªå…³èŠ‚ï¼Œé«˜ç²¾åº¦ç½‘æ ¼ |
| ğŸ“š **è¯¦ç»†æ–‡æ¡£** | ä»é›¶å¼€å§‹çš„å®Œæ•´æ•™ç¨‹ |
| ğŸš€ **æ˜“äºæ‰©å±•** | æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ–¹ä¾¿é›†æˆæ–°åŠŸèƒ½ |

### é¡¹ç›®ç»„æˆ

```
ğŸ¤– Panda Robot Demo
â”œâ”€â”€ ğŸ“¦ ROS 2 åŒ…ï¼ˆpanda_descriptionï¼‰
â”œâ”€â”€ ğŸ¨ å®Œæ•´ URDF æ¨¡å‹
â”œâ”€â”€ ğŸ–¼ï¸ 20ä¸ªé«˜è´¨é‡3Dç½‘æ ¼
â”œâ”€â”€ ğŸš€ 3ç§æ§åˆ¶æ–¹æ³•
â”œâ”€â”€ ğŸ“š å®Œæ•´æ–‡æ¡£
â””â”€â”€ ğŸ¬ å³å¯ä½¿ç”¨çš„ç¤ºä¾‹
```

---

## 2. å¿«é€Ÿæ¼”ç¤ºï¼ˆ3æ­¥å¯åŠ¨ï¼‰

### å‰ç½®è¦æ±‚

```bash
# æ£€æŸ¥ ROS 2 Humble å®‰è£…
ros2 --version
# è¾“å‡ºåº”ä¸º: ROS 2 Humble ...

# æ£€æŸ¥å¿…è¦å·¥å…·
which python3
which rviz2
```

### æ¼”ç¤ºæ­¥éª¤

#### **æ­¥éª¤ 1ï¸âƒ£ï¼šè¿›å…¥å·¥ä½œåŒº**

```bash
cd /media/dubhe/store/sim/panda/PandaRobot/ros2_ws
```

#### **æ­¥éª¤ 2ï¸âƒ£ï¼šåŠ è½½ ROS 2 ç¯å¢ƒ**

```bash
source install/setup.bash
```

#### **æ­¥éª¤ 3ï¸âƒ£ï¼šå¯åŠ¨æ¼”ç¤º**

**é€‰é¡¹ A - åŸºç¡€æ¼”ç¤ºï¼ˆä»…å¯è§†åŒ–ï¼‰**
```bash
./run_panda.sh
```
âœ¨ **ç»“æœ**ï¼šRViz2 æ‰“å¼€ï¼Œè‡ªåŠ¨æ˜¾ç¤º Panda æœºå™¨äºº 3D æ¨¡å‹

**é€‰é¡¹ B - GUI æ§åˆ¶æ¼”ç¤ºï¼ˆæ¨èï¼‰**
```bash
ros2 launch panda_description view_panda_gui.launch.py
```
âœ¨ **ç»“æœ**ï¼š
- RViz2 æ˜¾ç¤ºæœºå™¨äºº
- GUI çª—å£å‡ºç° 10 ä¸ªå…³èŠ‚çš„æ»‘å—
- æ‹–åŠ¨æ»‘å—å³å¯æ§åˆ¶æœºå™¨äººå…³èŠ‚

### æ¼”ç¤ºæ•ˆæœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         RViz2 çª—å£               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    Panda æœºå™¨äºº 3D æ¨¡å‹     â”‚ â”‚
â”‚  â”‚  - å®æ—¶æ˜¾ç¤ºå…³èŠ‚ä½ç½®         â”‚ â”‚
â”‚  â”‚  - åæ ‡ç³»å¯è§†åŒ–             â”‚ â”‚
â”‚  â”‚  - ç½‘æ ¼é«˜ç²¾åº¦æ¸²æŸ“           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  joint_state_publisher_gui       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ panda_joint1  [====â—====]  â”‚ â”‚
â”‚  â”‚ panda_joint2  [===â—=====]  â”‚ â”‚
â”‚  â”‚ panda_joint3  [====â—====]  â”‚ â”‚
â”‚  â”‚ ...ï¼ˆå…±10ä¸ªå…³èŠ‚ï¼‰          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æœºå™¨äººæ§åˆ¶æ–¹æ³•

### æ–¹æ³• 1ï¸âƒ£ï¼šGUI æ»‘å—æ§åˆ¶ï¼ˆæœ€ç®€å•ï¼‰â­

**æœ€é€‚åˆ**ï¼šæ¼”ç¤ºã€å¿«é€Ÿæµ‹è¯•ã€ä¸éœ€è¦ç¼–ç¨‹

**å¯åŠ¨æ–¹å¼**
```bash
cd /media/dubhe/store/sim/panda/PandaRobot/ros2_ws
source install/setup.bash
ros2 launch panda_description view_panda_gui.launch.py
```

**ä½¿ç”¨æ–¹æ³•**
1. RViz2 è‡ªåŠ¨æ‰“å¼€ï¼Œæ˜¾ç¤ºæœºå™¨äºº
2. åŒæ—¶å¼¹å‡º `joint_state_publisher_gui` çª—å£
3. æ‹–åŠ¨çª—å£ä¸­çš„ 10 ä¸ªæ»‘å—æ§åˆ¶å…³èŠ‚
4. æœºå™¨äººå®æ—¶å“åº”ï¼ŒRViz2 ä¸­çš„æ¨¡å‹ä¹Ÿå®æ—¶æ›´æ–°

**ä¼˜ç‚¹**
- âœ… æ— éœ€ç¼–ç¨‹
- âœ… ç›´è§‚æ˜“ç”¨
- âœ… å®æ—¶åé¦ˆ
- âœ… æ”¯æŒæ‰€æœ‰ 10 ä¸ªå…³èŠ‚

**ç¼ºç‚¹**
- âŒ æ— æ³•ä¿å­˜/é‡å¤åŠ¨ä½œ
- âŒ æ— æ³•ç¼–ç¨‹è‡ªåŠ¨åŒ–

---

### æ–¹æ³• 2ï¸âƒ£ï¼šPython è„šæœ¬æ§åˆ¶ï¼ˆæ¨èï¼‰â­â­

**æœ€é€‚åˆ**ï¼šè‡ªåŠ¨åŒ–ã€ç¼–ç¨‹ã€æ•™å­¦

**å¿«é€Ÿå¼€å§‹**

```bash
# å¯åŠ¨æœºå™¨äººç³»ç»Ÿï¼ˆåå°ï¼‰
cd /media/dubhe/store/sim/panda/PandaRobot/ros2_ws
source install/setup.bash
ros2 launch panda_description view_panda.launch.py &

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæ§åˆ¶è„šæœ¬
source install/setup.bash
python3 src/panda_description/scripts/panda_joint_controller.py home
```

**é¢„è®¾ä½ç½®**

```bash
# Home ä½ç½®ï¼ˆåˆå§‹ä½ç½®ï¼‰
python3 panda_joint_controller.py home

# Ready ä½ç½®ï¼ˆå‡†å¤‡å°±ç»ªï¼‰
python3 panda_joint_controller.py ready

# Stretch ä½ç½®ï¼ˆä¼¸å±•ï¼‰
python3 panda_joint_controller.py stretch

# Openï¼ˆæ‰“å¼€å¤¹çˆªï¼‰
python3 panda_joint_controller.py open

# Closeï¼ˆå…³é—­å¤¹çˆªï¼‰
python3 panda_joint_controller.py close
```

**è‡ªå®šä¹‰æ§åˆ¶**

ç¼–è¾‘ `src/panda_description/scripts/panda_joint_controller.py`ï¼š

```python
def move_to_position(position_dict):
    """
    position_dict: å…³èŠ‚åç§° -> è§’åº¦(å¼§åº¦)
    ç¤ºä¾‹:
    {
        'panda_joint1': 0.0,
        'panda_joint2': -0.785,
        'panda_joint3': 0.0,
        ...
    }
    """
    msg = JointState()
    msg.header.stamp = self.get_clock().now().to_msg()
    msg.name = list(position_dict.keys())
    msg.position = list(position_dict.values())
    self.publisher.publish(msg)
```

**ä¼˜ç‚¹**
- âœ… å¯ç¼–ç¨‹è‡ªåŠ¨åŒ–
- âœ… æ˜“äºé›†æˆåˆ°å¤§å‹ç³»ç»Ÿ
- âœ… æ”¯æŒåŠ¨ä½œåºåˆ—
- âœ… å¯é‡å¤ä½¿ç”¨

---

### æ–¹æ³• 3ï¸âƒ£ï¼šJupyter Notebook äº¤äº’å¼æ§åˆ¶â­â­â­

**æœ€é€‚åˆ**ï¼šæ•™å­¦ã€ç ”ç©¶ã€äº¤äº’å¼å¼€å‘

**å¯åŠ¨æ–¹å¼**

```bash
# æ–¹å¼1ï¼šä½¿ç”¨è„šæœ¬å¯åŠ¨ï¼ˆæ¨èï¼‰
cd /media/dubhe/store/sim/panda/PandaRobot/ros2_ws
bash src/panda_description/notebooks/start_notebook.sh

# æ–¹å¼2ï¼šæ‰‹åŠ¨å¯åŠ¨
source install/setup.bash
jupyter notebook src/panda_description/notebooks/panda_control_interactive.ipynb
```

**åŠŸèƒ½ç‰¹æ€§**

```python
# åˆ›å»ºæœºå™¨äººæ§åˆ¶å™¨
controller = PandaController()

# å®æ—¶æ»‘å—æ§åˆ¶ï¼ˆåœ¨ Notebook ä¸­ï¼‰
interact(controller.set_joint_position, 
         joint1=(-3.14, 3.14, 0.01),
         joint2=(-2.0, 2.0, 0.01),
         ...)

# æ˜¾ç¤ºå½“å‰å…³èŠ‚çŠ¶æ€
controller.print_status()

# æ‰§è¡Œé¢„è®¾åŠ¨ä½œ
controller.move_to('home')
controller.move_to('ready')

# è‡ªå®šä¹‰åŠ¨ä½œ
controller.move([0, -0.785, 0, -2.356, 0, 1.571, 0.785])
```

**åœ¨ Notebook ä¸­çš„æ•ˆæœ**

```
[ ] ä»£ç å•å…ƒæ ¼
[ ] å®æ—¶æ»‘å— â”œâ”€ panda_joint1: [====â—====]
             â”œâ”€ panda_joint2: [===â—=====]
             â”œâ”€ panda_joint3: [====â—====]
             â””â”€ ... (10ä¸ªæ»‘å—)
[ ] å…³èŠ‚çŠ¶æ€æ˜¾ç¤º
[ ] æ‰§è¡ŒåŠ¨ä½œæŒ‰é’®
```

**ä¼˜ç‚¹**
- âœ… äº¤äº’å¼å¼€å‘
- âœ… å®æ—¶åé¦ˆ
- âœ… é€‚åˆæ•™å­¦
- âœ… æ˜“äºè°ƒè¯•

---

## 4. ç³»ç»Ÿæ¶æ„

### è½¯ä»¶æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ROS 2 Humble ç¯å¢ƒ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ RViz2        â”‚  â”‚ joint_state  â”‚             â”‚
â”‚  â”‚ (å¯è§†åŒ–)     â”‚  â”‚ _publisher   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ _gui         â”‚             â”‚
â”‚         â–²          â”‚ (æ§åˆ¶GUI)    â”‚             â”‚
â”‚         â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                 â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚         Topic: /joint_states                    â”‚
â”‚              /tf                                â”‚
â”‚                 â–²                               â”‚
â”‚                 â”‚                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â”‚robot_state_     â”‚                     â”‚
â”‚         â”‚publisher        â”‚                     â”‚
â”‚         â”‚(TF å‘å¸ƒ)       â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                 â”‚                               â”‚
â”‚         Topic: /robot_description              â”‚
â”‚                 â”‚                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚   URDF æ¨¡å‹            â”‚              â”‚
â”‚         â”‚ (panda.urdf)           â”‚              â”‚
â”‚         â”‚ 12 links, 8 joints     â”‚              â”‚
â”‚         â”‚ 20 meshes (.dae)       â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–‡ä»¶ç»“æ„

```
ros2_ws/
â”œâ”€â”€ ğŸ“„ DEMO.md                          â† ä½ æ­£åœ¨çœ‹è¿™ä¸ªæ–‡ä»¶ï¼
â”œâ”€â”€ ğŸ“„ run_panda.sh                     â† ä¸€é”®å¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ src/panda_description/
â”‚   â”œâ”€â”€ package.xml                     â† åŒ…é…ç½®
â”‚   â”œâ”€â”€ CMakeLists.txt                  â† æ„å»ºé…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ urdf/
â”‚   â”‚   â””â”€â”€ panda.urdf                  â† æœºå™¨äººæ¨¡å‹å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ meshes/
â”‚   â”‚   â”œâ”€â”€ visual/                     â† å¯è§†åŒ–ç½‘æ ¼ (DAEæ ¼å¼ï¼Œ10ä¸ª)
â”‚   â”‚   â”‚   â”œâ”€â”€ panda_hand.dae
â”‚   â”‚   â”‚   â”œâ”€â”€ panda_link0.dae
â”‚   â”‚   â”‚   â”œâ”€â”€ ... (8 more)
â”‚   â”‚   â”‚   â””â”€â”€ panda_rightfinger.dae
â”‚   â”‚   â””â”€â”€ collision/                  â† ç¢°æ’ç½‘æ ¼ (OBJæ ¼å¼ï¼Œ10ä¸ª)
â”‚   â”‚       â”œâ”€â”€ panda_hand.obj
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ launch/
â”‚   â”‚   â”œâ”€â”€ view_panda.launch.py        â† åŸºç¡€å¯åŠ¨ï¼ˆä»…å¯è§†åŒ–ï¼‰
â”‚   â”‚   â”œâ”€â”€ view_panda_gui.launch.py    â† GUIå¯åŠ¨ï¼ˆæ¨èæ¼”ç¤ºï¼‰
â”‚   â”‚   â””â”€â”€ panda.rviz                  â† RViz2 é…ç½®æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ panda_joint_controller.py   â† Python æ§åˆ¶è„šæœ¬
â”‚   â”‚
â”‚   â””â”€â”€ notebooks/
â”‚       â”œâ”€â”€ panda_control_interactive.ipynb  â† Jupyter äº¤äº’å¼
â”‚       â””â”€â”€ start_notebook.sh                â† Notebook å¯åŠ¨è„šæœ¬
â”‚
â””â”€â”€ install/                             â† å·²å®‰è£…æ–‡ä»¶
```

### å…³é”®æ¦‚å¿µ

#### **URDF (Unified Robot Description Format)**
æœºå™¨äººçš„å®Œæ•´æè¿°ï¼ŒåŒ…å«ï¼š
- **Links**ï¼šåˆšä½“éƒ¨ä»¶ï¼ˆ12ä¸ªï¼‰
  - panda_link0~7ï¼ˆ7ä¸ªæ—‹è½¬å…³èŠ‚ï¼‰
  - panda_handã€panda_leftfingerã€panda_rightfinger
- **Joints**ï¼šå…³èŠ‚è¿æ¥ï¼ˆ8ä¸ªï¼‰
  - panda_joint1~7ï¼šæ—‹è½¬å…³èŠ‚ï¼ˆ-3.14~3.14 radï¼‰
  - panda_hand_jointï¼šå›ºå®šå…³èŠ‚ï¼ˆæœ«ç«¯æ‰§è¡Œå™¨ï¼‰

#### **Topicï¼ˆè¯é¢˜ï¼‰**
ROS 2 ä¸­çš„é€šä¿¡æœºåˆ¶ï¼š

| è¯é¢˜ | ç±»å‹ | å‘å¸ƒè€… | è¯´æ˜ |
|------|------|--------|------|
| `/joint_states` | JointState | joint_state_publisher_gui | å…³èŠ‚çŠ¶æ€ï¼ˆä½ç½®ã€é€Ÿåº¦ï¼‰ |
| `/tf` | TransformStamped | robot_state_publisher | åæ ‡å˜æ¢æ ‘ |
| `/robot_description` | String | launch | URDF æ¨¡å‹æ–‡æœ¬ |

---

## 5. æŠ€æœ¯è§„æ ¼

### æœºå™¨äººè§„æ ¼

| å‚æ•° | å€¼ |
|------|-----|
| **ç±»å‹** | 7-DOF åä½œæœºå™¨äºº |
| **åˆ¶é€ å•†** | Franka Emika |
| **å…³èŠ‚æ•°** | 7 ä¸ªæ—‹è½¬å…³èŠ‚ |
| **æœ«ç«¯æ‰§è¡Œå™¨** | 2 æŒ‡å¹³è¡Œå¤¹çˆª |
| **æ€»Linkæ•°** | 12 ä¸ª |
| **å·¥ä½œç©ºé—´** | çƒå½¢ï¼ŒåŠå¾„ ~0.85m |
| **è´Ÿè½½** | 3 kgï¼ˆé¢å®šï¼‰ |

### å…³èŠ‚è§„æ ¼

```
panda_joint1:  æ—‹è½¬èŒƒå›´ [-Ï€, Ï€]     (Â±180Â°)
panda_joint2:  æ—‹è½¬èŒƒå›´ [-Ï€, Ï€]     (Â±180Â°)
panda_joint3:  æ—‹è½¬èŒƒå›´ [-Ï€, Ï€]     (Â±180Â°)
panda_joint4:  æ—‹è½¬èŒƒå›´ [-Ï€, Ï€]     (Â±180Â°)
panda_joint5:  æ—‹è½¬èŒƒå›´ [-Ï€, Ï€]     (Â±180Â°)
panda_joint6:  æ—‹è½¬èŒƒå›´ [-Ï€, Ï€]     (Â±180Â°)
panda_joint7:  æ—‹è½¬èŒƒå›´ [-Ï€, Ï€]     (Â±180Â°)
panda_hand:    å¹³è¡Œå¤¹çˆªï¼ˆå›ºå®šï¼‰
```

### ç³»ç»Ÿè¦æ±‚

| ç»„ä»¶ | è¦æ±‚ | å¤‡æ³¨ |
|------|------|------|
| **OS** | Ubuntu 22.04 LTS | å…¶ä»– Ubuntu ç‰ˆæœ¬ä¹Ÿå¯ä»¥ |
| **ROS 2** | Humble | å¯èƒ½æ”¯æŒ Iron, Rolling |
| **Python** | 3.10+ | ç”¨äºè„šæœ¬å’Œ Notebook |
| **GPU** | å¯é€‰ | RViz2 å»ºè®®æ”¯æŒ OpenGL 4.6+ |
| **å†…å­˜** | 4 GB+ | æ¨è 8 GB |
| **ç£ç›˜ç©ºé—´** | 500 MB+ | åŒ…å«ç½‘æ ¼æ–‡ä»¶ |

### ä¾èµ–åŒ…

```bash
# è‡ªåŠ¨ä¾èµ–ï¼ˆå·²é…ç½®ï¼‰
- ros2-humble-robot-state-publisher
- ros2-humble-joint-state-publisher-gui
- ros2-humble-rviz2
- ros2-humble-ament-cmake

# å¯é€‰ï¼ˆç”¨äº Notebookï¼‰
- jupyter
- matplotlib
- ipywidgets
```

---

## 6. å¸¸è§é—®é¢˜

### â“ Q1: å¯åŠ¨å RViz2 ä¸æ˜¾ç¤ºæœºå™¨äºº

**åŸå› **ï¼šRViz2 è¿˜æœªåŠ è½½é…ç½®

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹æ¡ˆ Aï¼šä½¿ç”¨ GUI å¯åŠ¨ï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰
ros2 launch panda_description view_panda_gui.launch.py

# æ–¹æ¡ˆ Bï¼šæ‰‹åŠ¨é…ç½®
# åœ¨ RViz2 ä¸­ï¼š
# 1. Add â†’ RobotModel
# 2. Fixed Frame æ”¹ä¸º "panda_link0"
```

---

### â“ Q2: å…³èŠ‚æ»‘å—æ— æ³•æ‹–åŠ¨

**åŸå› **ï¼šå¯èƒ½æ˜¯ GUI ç„¦ç‚¹é—®é¢˜æˆ–æƒé™é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é‡å¯ GUI
pkill -f joint_state_publisher_gui
ros2 launch panda_description view_panda_gui.launch.py

# æˆ–é‡æ–°å¯åŠ¨æ•´ä¸ªç³»ç»Ÿ
pkill -f "rviz2|robot_state|joint_state"
./run_panda.sh
```

---

### â“ Q3: Python è„šæœ¬æç¤ºæ‰¾ä¸åˆ°åŒ…

**åŸå› **ï¼šæœªåŠ è½½ ROS 2 ç¯å¢ƒ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å¿…é¡»åœ¨åŒä¸€ç»ˆç«¯ä¸­æ‰§è¡Œ
source install/setup.bash
python3 src/panda_description/scripts/panda_joint_controller.py home
```

---

### â“ Q4: Jupyter Notebook æ— æ³•å¯åŠ¨

**åŸå› **ï¼šJupyter æœªå®‰è£…æˆ–ç¯å¢ƒé—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£… Jupyter
pip3 install jupyter ipywidgets

# å¯åŠ¨ Notebook
cd ros2_ws
source install/setup.bash
jupyter notebook src/panda_description/notebooks/panda_control_interactive.ipynb
```

---

### â“ Q5: å¦‚ä½•è‡ªå®šä¹‰æœºå™¨äººä½ç½®ï¼Ÿ

**æ–¹æ³•1ï¼šç¼–è¾‘ URDF**
```xml
<!-- ä¿®æ”¹ src/panda_description/urdf/panda.urdf -->
<origin xyz="0 0 0.4" rpy="0 0 0"/>
```

**æ–¹æ³•2ï¼šä½¿ç”¨ Python è„šæœ¬**
```python
# è‡ªå®šä¹‰å…³èŠ‚è§’åº¦
positions = {
    'panda_joint1': 0.5,
    'panda_joint2': -1.0,
    'panda_joint3': 0.2,
    # ... å…¶ä»–å…³èŠ‚
}
controller.move_to_position(positions)
```

---

### â“ Q6: å¦‚ä½•å½•åˆ¶/å›æ”¾æœºå™¨äººåŠ¨ä½œï¼Ÿ

**ä½¿ç”¨ ROS 2 Bagï¼ˆå½•åˆ¶ï¼‰**
```bash
# å½•åˆ¶å…³èŠ‚çŠ¶æ€
ros2 bag record /joint_states -o panda_demo

# å›æ”¾
ros2 bag play panda_demo
```

**ä½¿ç”¨ Python è„šæœ¬ï¼ˆä¿å­˜åŠ¨ä½œåºåˆ—ï¼‰**
```python
import json

# ä¿å­˜å½“å‰å§¿æ€
gestures = {
    'home': [0.0, -0.785, 0.0, -2.356, 0.0, 1.571, 0.785],
    'ready': [0.0, -0.454, 0.0, -2.254, 0.0, 1.809, 0.785],
    'custom': [angles...]
}
with open('gestures.json', 'w') as f:
    json.dump(gestures, f)

# åŠ è½½å¹¶æ‰§è¡Œ
with open('gestures.json', 'r') as f:
    gestures = json.load(f)
controller.move(gestures['home'])
```

---

### â“ Q7: å¦‚ä½•æ·»åŠ æ–°çš„é¢„è®¾ä½ç½®ï¼Ÿ

ç¼–è¾‘ `panda_joint_controller.py`ï¼š

```python
PREDEFINED_POSITIONS = {
    'home': {
        'panda_joint1': 0.0,
        'panda_joint2': -0.785,
        # ...
    },
    'my_custom_pose': {  # â† æ·»åŠ æ–°ä½ç½®
        'panda_joint1': 1.5,
        'panda_joint2': -1.2,
        # ... è®¾ç½®æ‰€æœ‰ 7 ä¸ªå…³èŠ‚
    }
}

# ç„¶åä½¿ç”¨
python3 panda_joint_controller.py my_custom_pose
```

---

### â“ Q8: èƒ½å¦ä¸çœŸå® Panda æœºå™¨äººä¸€èµ·ä½¿ç”¨ï¼Ÿ

**å½“å‰**ï¼šè¿™æ˜¯ä»¿çœŸç³»ç»Ÿï¼Œç”¨äºå¯è§†åŒ–å’Œå­¦ä¹ 

**æœªæ¥å¯ä»¥**ï¼š
1. è¿æ¥åˆ°çœŸå® Panda æœºå™¨äººçš„æ§åˆ¶å™¨
2. ä½¿ç”¨ `franka_ros2` å®˜æ–¹åŒ…
3. å°†æ§åˆ¶å‘½ä»¤è½¬æ¢ä¸ºå®é™…å…³èŠ‚å‘½ä»¤

**å‚è€ƒèµ„æº**ï¼š
- [Franka ROS 2](https://github.com/frankaemika/franka_ros2)
- [Franka å®˜æ–¹æ–‡æ¡£](https://frankaemika.github.io/)

---

## ğŸ“š è¿›é˜¶ä½¿ç”¨

### ä¸ MoveIt 2 é›†æˆï¼ˆè·¯å¾„è§„åˆ’ï¼‰

```bash
# å®‰è£… MoveIt 2
sudo apt install ros-humble-moveit

# åœ¨ launch æ–‡ä»¶ä¸­æ·»åŠ 
from moveit_configs_utils import MoveItConfigsBuilder
from moveit_configs_utils.launches import generate_move_group_launch

# ä½¿ç”¨ MoveIt è¿›è¡Œè½¨è¿¹è§„åˆ’
```

### æ·»åŠ ä¼ æ„Ÿå™¨æ¨¡æ‹Ÿ

```python
# æ¨¡æ‹ŸåŠ›/åŠ›çŸ©ä¼ æ„Ÿå™¨
import numpy as np

def simulate_wrench():
    # æ¨¡æ‹Ÿæœ«ç«¯æ‰§è¡Œå™¨å—åˆ°çš„åŠ›
    force = np.array([0, 0, -9.81 * 3])  # é‡åŠ›
    torque = np.array([0, 0, 0])
    return force, torque
```

### å¯¼å‡ºä¸ºå…¶ä»–æ ¼å¼

```bash
# è½¬æ¢ URDF ä¸º MJCFï¼ˆMuJoCoï¼‰
python3 -m panda_description.tools.urdf_to_mjcf panda.urdf

# è½¬æ¢ä¸º SKELï¼ˆDartï¼‰
python3 -m panda_description.tools.urdf_to_skel panda.urdf
```

---

## ğŸ“ å­¦ä¹ èµ„æº

| èµ„æº | é“¾æ¥ | è¯´æ˜ |
|------|------|------|
| **ROS 2 å®˜æ–¹æ–‡æ¡£** | https://docs.ros.org/en/humble/ | å®Œæ•´ ROS 2 æ•™ç¨‹ |
| **URDF æ•™ç¨‹** | http://wiki.ros.org/urdf/Tutorials | æœºå™¨äººå»ºæ¨¡ |
| **RViz2 æŒ‡å—** | https://github.com/ros2/rviz | å¯è§†åŒ–å·¥å…· |
| **Franka å®˜æ–¹** | https://frankaemika.github.io/ | å®˜æ–¹æ–‡æ¡£ |
| **MoveIt 2** | https://moveit.ros.org/ | é«˜çº§è¿åŠ¨è§„åˆ’ |

---

## ğŸ“Š æ¼”ç¤ºæ¸…å•

ç”¨äºç°åœºæ¼”ç¤ºï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºè¿›è¡Œï¼š

```
[ ] 1. ç¯å¢ƒæ£€æŸ¥
      - æ£€æŸ¥ ROS 2 ç¯å¢ƒ
      - è¿›å…¥å·¥ä½œåŒº
      - source setup.bash

[ ] 2. å¯åŠ¨åŸºç¡€æ¼”ç¤º
      - ./run_panda.sh
      - å±•ç¤ºè‡ªåŠ¨åŠ è½½çš„æœºå™¨äººæ¨¡å‹
      - æ—‹è½¬è§†å›¾ã€ç¼©æ”¾

[ ] 3. æ¼”ç¤º GUI æ§åˆ¶
      - å¯åŠ¨ GUI ç‰ˆæœ¬
      - æ‹–åŠ¨å…³èŠ‚æ»‘å—
      - æ¼”ç¤ºå¤¹çˆªæ‰“å¼€/å…³é—­
      - æ¼”ç¤ºå¤šä¸ªé¢„è®¾ä½ç½®

[ ] 4. æ¼”ç¤º Python è„šæœ¬
      - è¿è¡Œ home â†’ ready â†’ stretch åºåˆ—
      - å±•ç¤ºè‡ªåŠ¨åŒ–æ§åˆ¶

[ ] 5. æ¼”ç¤º Jupyter Notebookï¼ˆå¯é€‰ï¼‰
      - äº¤äº’å¼æ»‘å—æ§åˆ¶
      - å®æ—¶åé¦ˆ
      - ç¼–ç¨‹ç¤ºä¾‹

[ ] 6. ç­”ç–‘
      - è§£ç­”è§‚ä¼—æé—®
      - è®¨è®ºåº”ç”¨åœºæ™¯
```

---

## ğŸ”— ç›¸å…³é¡¹ç›®

æœ¬é¡¹ç›®è¿˜åŒ…å«ï¼š

```
/media/dubhe/store/sim/panda/
â”œâ”€â”€ PandaRobot/
â”‚   â”œâ”€â”€ ros2_ws/              â† ä½ çš„ ROS 2 å·¥ä½œåŒºï¼ˆæœ¬é¡¹ç›®ï¼‰
â”‚   â”œâ”€â”€ deps/Panda/           â† åŸå§‹æ¨¡å‹æ–‡ä»¶
â”‚   â””â”€â”€ å…¶ä»–èµ„æº...
â””â”€â”€ ...
```

---

## ğŸ“ è®¸å¯è¯ & è‡´è°¢

- **Panda æ¨¡å‹**ï¼šFranka Emikaï¼ˆå®˜æ–¹ï¼‰
- **ROS 2 Humble**ï¼šå¼€æºç¤¾åŒº
- **æœ¬é¡¹ç›®**ï¼šæ¼”ç¤ºå’Œæ•™å­¦ç”¨é€”

---

## âœ‰ï¸ æ”¯æŒ & åé¦ˆ

é‡åˆ°é—®é¢˜ï¼Ÿ

```bash
# 1. æŸ¥çœ‹æ—¥å¿—
tail -f ~/.ros/log/latest/*/std*

# 2. æ£€æŸ¥æ‰€æœ‰èŠ‚ç‚¹è¿è¡ŒçŠ¶æ€
ros2 node list

# 3. æ£€æŸ¥è¯é¢˜çŠ¶æ€
ros2 topic list
ros2 topic echo /joint_states

# 4. è°ƒè¯• URDF
ros2 topic echo /robot_description | head -20
```

---

**å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ** ğŸš€

```bash
cd /media/dubhe/store/sim/panda/PandaRobot/ros2_ws
./run_panda.sh
# æˆ–è€…
ros2 launch panda_description view_panda_gui.launch.py
```

**ç¥ä½ æ¼”ç¤ºæˆåŠŸï¼** ğŸ¤–âœ¨